(function(e){function t(t){for(var o,i,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)i=s[u],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},i={app:0},r={app:0},a=[];function s(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-5a09baf6":"1e0aad4a","chunk-6e3a61db":"ac91ad50","chunk-777fc688":"81fb0ff6"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-5a09baf6":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var o="css/"+({}[e]||e)+"."+{"chunk-5a09baf6":"e1299e68","chunk-6e3a61db":"31d6cfe0","chunk-777fc688":"31d6cfe0"}[e]+".css",r=l.p+o,a=document.getElementsByTagName("link"),s=0;s<a.length;s++){var c=a[s],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===o||u===r))return t()}var p=document.getElementsByTagName("style");for(s=0;s<p.length;s++){c=p[s],u=c.getAttribute("data-href");if(u===o||u===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var o=t&&t.target&&t.target.src||r,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete i[e],d.parentNode.removeChild(d),n(a)},d.href=r;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=a);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=s(e);var p=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",p.name="ChunkLoadError",p.type=o,p.request=i,n[1](p)}r[e]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var p=0;p<c.length;p++)t(c[p]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("4cae")},"002d":function(e,t){e.exports=iview},"0128":function(e,t,n){},"2b5f":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("d3b7"),n("159b"),n("b0c0");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=[];return t.forEach((function(t,r){e.forEach((function(e,r){e.name!==t.meta.name&&e.name!==n||(e.children&&e.children.length>0&&(t.children=o(e.children,t.children,e.name)),i.push(t))}))})),i}},"4c03":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"background-color":"#212121",color:"#EFF1F6BF","margin-top":"100px",width:"100%"}},[n("div",{attrs:{id:"footerWrapper"}},[n("div",{staticStyle:{display:"flex","justify-content":"space-around",padding:"10px 0 20px 0"}},[n("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"start"}},[n("h4",{staticStyle:{color:"#fff","font-weight":"400","margin-bottom":"10px"}},[n("Icon",{attrs:{type:"logo-github"}}),e._v(" Github ")],1),n("el-link",{attrs:{href:"",underline:!1,disabled:""}},[e._v("TTOJ")])],1),n("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"start"}},[n("h4",{staticStyle:{color:"#fff","font-weight":"400","margin-bottom":"10px"}},[n("Icon",{attrs:{type:"md-help"}}),e._v(" 帮助 ")],1),n("el-link",{attrs:{underline:!1,target:"_blank",disabled:""}},[e._v("问题反馈")]),n("el-link",{attrs:{underline:!1,target:"_blank",disabled:""}},[e._v("使用说明")])],1)]),n("div",{staticStyle:{"border-top":"1px solid hsla(0,0%,100%,.25)","text-align":"center",padding:"10px 0"}},[n("el-link",{attrs:{href:"http://beian.miit.gov.cn/",target:"_blank"}},[e._v("蜀ICP备2022011082号")]),n("div",[e._v("Developed by onesunny")]),n("div",[e._v("2022-2022 © TTOJ")])],1)])])},i=[],r={name:"Footer"},a=r,s=(n("b66f"),n("2877")),l=Object(s["a"])(a,o,i,!1,null,"a9958210",null);t["a"]=l.exports},"4cae":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("8bbf"),i=n.n(o),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[e.isRouterAlive?n("router-view",{staticStyle:{height:"100%"}}):e._e()],1)},a=[],s=(n("e9c4"),n("6e87")),l=n("2b5f"),c=n("a18c"),u=n("fb22");n("e26a"),n("fb6a"),n("d3b7");var p,d={name:"App",provide:function(){return{reload:this.reload}},mounted:function(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;console.log(e)},created:function(){var e=this;this.$store.dispatch(s["a"].Get_LoginUser).then((function(t){if(console.log("Get_LoginUser: "),console.log(t),t.success){var n=t.data.loginUser;if(n){e.$store.commit(s["a"].Set_LoginUser,t.data.loginUser);var o=Object(l["a"])(n.manageRouters,u["a"]);for(var i in o)c["a"].addRoute("dynamicRoutesParent",o[i])}}else;})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)}))},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},m=d,f=n("2877"),h=Object(f["a"])(m,r,a,!1,null,null,null),g=h.exports,b=n("5880"),v=n.n(b),y=n("ade3"),x=n("5d2d"),w=(p={},Object(y["a"])(p,s["a"].Set_LoginUser,(function(e,t){i.a.set(e,"user",t.user),i.a.set(e,"permissions",t.permissions),i.a.set(e,"manageRouter",t.manageRouters)})),Object(y["a"])(p,s["a"].Clear_LoginUser,(function(e){i.a.set(e,"user",null),i.a.set(e,"permissions",null),i.a.set(e,"manageRouter",null),x["a"].remove("token")})),p),S=n("a8f9"),C=Object(y["a"])({},s["a"].Get_LoginUser,(function(e){return Object(S["a"])()})),k={user:function(e){return e.user},userId:function(e){return console.log(e.user),e.user?e.user.id:null},username:function(e){return e.user?e.user.username:null},auth:function(e){return console.log(1),!!e.user&&!!e.user.id},showManageBtn:function(e){return console.log(e.permissions),!!e.permissions&&e.permissions.length>0},showProblemManage:function(e){return!!e.permissions&&(e.permissions.indexOf("manage:all:problem")>=0||e.permissions.indexOf("manage:own:problem")>=0)},showContestManage:function(e){return!!e.permissions&&(e.permissions.indexOf("manage:all:contest")>=0||e.permissions.indexOf("manage:own:contest")>=0)},showProblemTagManage:function(e){return!!e.permissions&&e.permissions.indexOf("manage:all:problemTag")>=0},showUserManage:function(e){return!!e.permissions&&e.permissions.indexOf("manage:all:user")>=0}},_=n("2909"),I=(n("4de4"),n("b0c0"),n("c276")),N=n("f121"),P=function(e,t){var n=Object(I["b"])(e.tagNavList,t);e.tagNavList=e.tagNavList.filter((function(e){return!Object(I["e"])(e,t)})),console.log(n),c["a"].push(n||{name:"contestProblems"})},O={state:{tagNavList:[],homeRoute:{}},getters:{},mutations:{setTagNavList:function(e,t){var n=t.list,o=t.contestId;console.log(n,o);var i=[];i=n?Object(_["a"])(n):Object(I["d"])(o)||[],e.tagNavList=i,Object(I["g"])(Object(_["a"])(i),o)},closeTag:function(e,t){var n=e.tagNavList.filter((function(e){return Object(I["e"])(e,t)}));t=n[0]?n[0]:null,t&&P(e,t)},addTag:function(e,t){var n=t.route,o=t.contestId;if(-1===N["a"].commonTagName.indexOf(n.name)){var i=Object(I["c"])(n);Object(I["f"])(e.tagNavList,i)||(e.tagNavList.push(i),Object(I["g"])(Object(_["a"])(e.tagNavList),o))}}},actions:{}};i.a.use(v.a);var $={user:{}},j=new v.a.Store({state:$,getters:k,mutations:w,actions:C,modules:{contest:O}}),T=(n("f33e"),n("5a0c")),z=n.n(T),E=n("d772"),L=n.n(E),V=n("a93c"),A=n.n(V),F=n("8f94"),D=n.n(F),B=(n("a7be"),n("9a0d")),M=n.n(B),R=(n("749a"),{inserted:function(e){e.children[0].focus()}}),U={focus:R},J=U,q=function(e){e.directive("focus",J.focus)},W=q,G=n("785b"),H=n("5f72"),Y=n.n(H);i.a.config.productionTip=!1,z.a.extend(L.a),i.a.prototype.$dayjs=z.a,i.a.use(A.a),i.a.use(D.a),i.a.use(M.a),W(i.a),i.a.directive("clickOutside",G["directive"]),i.a.prototype.$config=N["a"],i.a.prototype.errorNotify=function(e){Y.a.Notification.error({title:"失败",message:e,duration:0})},i.a.prototype.successNotify=function(e){Y.a.Notification.success({title:"成功",message:e,duration:1e3})},i.a.prototype.warnNotify=function(e){Y.a.Notification.warning({title:"警告",message:e,duration:1e3})},i.a.prototype.infoNotify=function(e){Y.a.Notification.info({title:"消息",message:e,duration:3e3})},new i.a({el:"#app",router:c["a"],store:j,render:function(e){return e(g)}})},5880:function(e,t){e.exports=Vuex},"5d2d":function(e,t,n){"use strict";n("e9c4");var o=window.localStorage;t["a"]={name:"storage",set:function(e,t){o.setItem(e,JSON.stringify(t))},get:function(e){return JSON.parse(o.getItem(e))||null},remove:function(e){o.removeItem(e)},clear:function(){o.clear()}}},"5f72":function(e,t){e.exports=ELEMENT},6389:function(e,t){e.exports=VueRouter},"6e87":function(e,t,n){"use strict";var o="Set_LoginUser",i="Get_LoginUser",r="Clear_LoginUser";t["a"]={Set_LoginUser:o,Get_LoginUser:i,Clear_LoginUser:r}},"81cd":function(e,t,n){},8521:function(e,t,n){},"8bbf":function(e,t){e.exports=Vue},"90de":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return s}));n("2909"),n("a630"),n("3ca3"),n("d3b7"),n("6062"),n("ddb0"),n("99af"),n("a9e3"),n("b64b");var o=function(e,t){if(e.length&&t){var n=-1,o=e.length;while(++n<o){var i=e[n];t(i,n,e)}}},i=function(e,t){return e.some((function(e){return t.indexOf(e)>-1}))};var r=function(){return document.addEventListener?function(e,t,n){e&&t&&n&&e.addEventListener(t,n,!1)}:function(e,t,n){e&&t&&n&&e.attachEvent("on"+t,n)}}(),a=function(){return document.removeEventListener?function(e,t,n){e&&t&&e.removeEventListener(t,n,!1)}:function(e,t,n){e&&t&&e.detachEvent("on"+t,n)}}(),s=function(e,t){var n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&(0===n.length&&0===o.length||!n.some((function(n){return e[n]!=t[n]})))}},"99ea":function(e,t,n){"use strict";n("81cd")},a18c:function(e,t,n){"use strict";var o=n("8bbf"),i=n.n(o),r=n("f225"),a=n("6389"),s=n.n(a),l=n("002d"),c=n.n(l);i.a.use(s.a);var u=s.a.prototype.push;s.a.prototype.push=function(e){return u.call(this,e).catch((function(e){return e}))};var p=new s.a({routes:r["a"],mode:"history",scrollBehavior:function(e,t,n){return console.log(n),n||{x:0,y:0}}});p.beforeEach((function(e,t,n){c.a.LoadingBar.start(),n()})),p.afterEach((function(e){c.a.LoadingBar.finish()})),t["a"]=p},a8f9:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n("b775");function i(){return o["a"].get("/api/oj/user/currentUser")}function r(e){return o["a"].post("/api/oj/user/rank",e)}},a93c:function(e,t){e.exports=MavonEditor},aa14:function(e,t,n){},abec:function(e,t,n){},ae4e:function(e,t,n){"use strict";n("e91e")},afe4:function(e,t,n){"use strict";n("aa14")},b66f:function(e,t,n){"use strict";n("0128")},b775:function(e,t,n){"use strict";n("d3b7");var o=n("cebe"),i=n.n(o),r=n("5d2d"),a=i.a.create({timeout:1e4});a.interceptors.request.use((function(e){e.headers["Content-Type"]="application/json;charset=utf-8";var t=r["a"].get("token");return"login"!==e.url&&"register"!==e.url&&t&&(e.headers["token"]=t),e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){var t=e.data;return"blob"===e.config.responseType||"string"===typeof t&&(t=t?JSON.parse(t):t),t}),(function(e){return Promise.reject(e)})),t["a"]=a},c276:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return g}));var o=n("2909"),i=n("5530"),r=(n("b0c0"),n("d3b7"),n("d81d"),n("4de4"),n("99af"),n("caad"),n("2532"),n("ac1f"),n("5319"),n("498a"),n("e9c4"),n("c740"),n("1276"),n("159b"),n("d9e2"),n("f121")),a=n("90de"),s=(r["a"].title,r["a"].cookieExpires,r["a"].useI18n),l=function(e){var t=Object(i["a"])({},e),n=Object(i["a"])({},e.meta),o="";return n.title&&("function"===typeof n.title?(n.__titleIsFunction__=!0,o=n.title(t)):o=n.title),n.title=o,t.meta=n,t},c=function(e,t){var n=e.meta,o=n.title,i=n.__titleIsFunction__;if(o)return o=s?o.includes("{{")&&o.includes("}}")&&s?o.replace(/({{[\s\S]+?}})/,(function(e,n){return n.replace(/{{([\s\S]*)}}/,(function(e,n){return t.$t(n.trim())}))})):i?e.meta.title:t.$t(e.name):e.meta&&e.meta.title||e.name,o},u=function(e,t){localStorage.setItem("tagNavList[".concat(t,"]"),JSON.stringify(e))},p=function(e){var t=localStorage.getItem("tagNavList[".concat(e,"]"));return t?JSON.parse(t):[]},d=function(e,t){var n=t.name,i=t.path,a=t.meta,s=Object(o["a"])(e);if(-1===r["a"].commonTagName.indexOf(n)){if(s.findIndex((function(e){return e.name===n}))>=0)return s;s.push({name:n,path:i,meta:a})}return s},m=function(e,t){var n=e.findIndex((function(e){return h(e,t)}));return e[n+1]||e[n-1]||null},f=function(e,t){var n=-1;while(++n<e)t(n)},h=function(e,t){var n=e.params||{},o=t.params||{},i=e.query||{},r=t.query||{};return e.name===t.name&&Object(a["c"])(n,o)&&Object(a["c"])(i,r)},g=function(e,t){var n=e.length,o=!1;return f(n,(function(n){h(e[n],t)&&(o=!0)})),o}},c6a2:function(e,t,n){"use strict";n("abec")},cebe:function(e,t){e.exports=axios},e26a:function(e,t,n){"use strict";var o,i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"300px",width:"500px",display:"flex",margin:"auto",background:"#f5f6f7","flex-direction":"column","box-shadow":"0 2px 12px 0 rgba(0, 0, 0, 0.1)"}},[n("div",{staticStyle:{width:"100%","border-bottom":"1px solid #e0e0e0","text-align":"center","line-height":"2"}},[e._v(" "+e._s(e.chatWith)+" ")]),e._l(e.msgList,(function(t){return n("div",{staticStyle:{margin:"8px 8px","border-radius":"5px"}},[n("div",{staticStyle:{display:"flex"}},[n("el-avatar",{attrs:{size:25,src:e.circleUrl}}),n("div",{staticStyle:{"margin-left":"8px"}},[n("div",[e._v(e._s(t.username))]),n("div",{staticClass:"leftMsg",staticStyle:{position:"relative"}},[n("div",{staticStyle:{padding:"6px 6px",background:"#fff","border-radius":"3px",display:"inline-block"}},[e._v(" "+e._s(t.msg)+" ")])])])],1),e._l(t.reply,(function(t){return n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"8px"}},[n("div",{staticStyle:{"margin-right":"8px"}},[n("div",{staticStyle:{"text-align":"right"}},[e._v(e._s(t.username))]),n("div",{staticClass:"rightMsg",staticStyle:{position:"relative"}},[n("div",{staticStyle:{padding:"6px 6px",background:"#409EFF","border-radius":"3px",display:"inline-block",color:"#fff"}},[e._v(" "+e._s(t.msg)+" ")])])]),n("el-avatar",{attrs:{size:25,src:e.circleUrl}})],1)}))],2)}))],2)},r=[],a=(n("e9c4"),n("4de4"),n("d3b7"),{name:"ChatBox",props:{msgList:{type:Array,default:function(){return[{msg:"你好,我有个问题",username:"111",reply:[{msg:"请说",username:"admin"},{msg:"你说不说?",username:"admin"}]},{msg:"我也有个问题",username:"222"}]}},chatWith:{type:String,default:"111"}},data:function(){return{circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",user:{},isCollapse:!1,users:[],chatUser:"",text:"",messages:[],content:""}},created:function(){},methods:{send:function(){if(this.chatUser)if(this.text)if("undefined"==typeof WebSocket)console.log("您的浏览器不支持WebSocket");else{console.log("您的浏览器支持WebSocket");var e={from:this.user.username,to:this.chatUser,text:this.text};o.send(JSON.stringify(e)),this.messages.push({user:this.user.username,text:this.text}),this.createContent(null,this.user.username,this.text),this.text=""}else this.warnNotify("请输入内容");else this.warnNotify("请选择聊天对象")},createContent:function(e,t,n){var o;t?o='<div class="el-row" style="padding: 5px 0">\n  <div class="el-col el-col-22" style="text-align: right; padding-right: 10px">\n    <div class="tip left">'+n+'</div>\n  </div>\n  <div class="el-col el-col-2">\n  <span class="el-avatar el-avatar--circle" style="height: 40px; width: 40px; line-height: 40px;">\n    <img src="https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png" style="object-fit: cover;">\n  </span>\n  </div>\n</div>':e&&(o='<div class="el-row" style="padding: 5px 0">\n  <div class="el-col el-col-2" style="text-align: right">\n  <span class="el-avatar el-avatar--circle" style="height: 40px; width: 40px; line-height: 40px;">\n    <img src="https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png" style="object-fit: cover;">\n  </span>\n  </div>\n  <div class="el-col el-col-22" style="text-align: left; padding-left: 10px">\n    <div class="tip right">'+n+"</div>\n  </div>\n</div>"),console.log(o),this.content+=o},init:function(){this.user=sessionStorage.getItem("user")?JSON.parse(sessionStorage.getItem("user")):{};var e=this.user.username,t=this;if("undefined"==typeof WebSocket)console.log("您的浏览器不支持WebSocket");else{console.log("您的浏览器支持WebSocket");var n="ws://localhost:9090/imserver/"+e;null!=o&&(o.close(),o=null),o=new WebSocket(n),o.onopen=function(){console.log("websocket已打开")},o.onmessage=function(n){console.log("收到数据===="+n.data);var o=JSON.parse(n.data);o.users?t.users=o.users.filter((function(t){return t.username!==e})):o.from===t.chatUser&&(t.messages.push(o),t.createContent(o.from,null,o.text))},o.onclose=function(){console.log("websocket已关闭")},o.onerror=function(){console.log("websocket发生了错误")}}}}}),s=a,l=(n("afe4"),n("2877")),c=Object(l["a"])(s,i,r,!1,null,null,null);t["a"]=c.exports},e91e:function(e,t,n){},f121:function(e,t,n){"use strict";t["a"]={title:"TTOJ",cookieExpires:1,useI18n:!1,baseUrl:"http://39.103.197.80:9991/",plugin:{},supportLanguages:[{value:"C",title:"C"},{value:"Cpp",title:"C++"},{value:"Java",title:"Java"},{value:"Python2",title:"Python2"},{value:"Python3",title:"Python3"}],judgeResult:[{value:"Accepted",title:"答案正确"},{value:"WrongAnswer",title:"答案错误"},{value:"TimeLimitExceeded",title:"运行超时"},{value:"RealTimeLimitExceeded",title:"输出时间超限"},{value:"MemoryLimitExceeded",title:"内存超限"},{value:"RuntimeError",title:"运行错误"},{value:"SystemError",title:"内部错误"},{value:"CompileError",title:"编译错误"}],commonTagName:["contestOverview","contestRankings","contestMy","contestSubmissions","contestProblems"],roles:["题目创作者","比赛举办方","管理员"],recentContestDays:3,msg:{timeout:"请求超时"},level:["入门","简单","中等","困难","极难"],levelColor:{"入门":"#03a89e","简单":"#2db55d","中等":"#e1b800","困难":"#ef4743","极难":"#cc3333"},supportRuleTypes:[{title:"ACM",value:1,rule:"ACM"},{title:"IOI",value:2,rule:"IOI"},{title:"OI",value:3,rule:"OI"}],hint:{contestAuthor:"将某个用户设为比赛出题人后,该用户自动拥有题目创作者身份\n同时可以管理该比赛,在比赛中的提交也不会被普通用户看到,也不进入排名"},msgColor:{error:"f56c6c",success:"#e1f3d8",warn:"#e6a23c",info:"#909399"}}},f225:function(e,t,n){"use strict";n("d3b7"),n("3ca3"),n("ddb0");var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"min-height":"100vh",height:"100%",width:"100%","background-color":"#fff"}},[n("Header",{attrs:{id:"header"}}),n("keep-alive",[n("router-view",{staticStyle:{"padding-top":"46px"}})],1),e.$route.matched[0]&&e.$route.matched[0].meta.needFooter?n("Footer"):e._e()],1)},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"fixed",top:"0",left:"0",height:"auto",width:"100%","z-index":"999"},attrs:{id:"headerWrapper"}},[n("div",{staticClass:"hidden-xs-only",staticStyle:{width:"100%","border-bottom":"solid 1px #e6e6e6"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.$route.path,mode:"horizontal",router:"",ellipsis:"false"},on:{select:e.handleSelect}},[n("div",{staticStyle:{height:"45px",float:"left",display:"flex","align-items":"center",margin:"0 20px"}},[n("el-image",{staticStyle:{height:"20px"},attrs:{src:"/static/TTOJ.svg",fit:"contain"}})],1),n("el-menu-item",{attrs:{index:"/home"}},[n("Icon",{attrs:{type:"md-home"}}),e._v(" 主页 ")],1),n("el-menu-item",{attrs:{index:"/problems"}},[n("Icon",{attrs:{type:"md-list"}}),e._v(" 题库 ")],1),n("el-menu-item",{attrs:{index:"/contest"}},[n("Icon",{attrs:{type:"md-medal"}}),e._v(" 比赛 ")],1),n("el-menu-item",{attrs:{index:"/forum"}},[n("Icon",{attrs:{type:"ios-chatboxes"}}),e._v(" 讨论 ")],1),e.showManageBtn?n("el-menu-item",{attrs:{index:"/manage"}},[n("Icon",{attrs:{type:"md-construct"}}),e._v(" 管理 ")],1):e._e(),e.auth?[n("el-submenu",{staticStyle:{float:"right","vertical-align":"center","margin-right":"10px"},attrs:{index:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("el-image",{staticStyle:{width:"20px",height:"20px","border-radius":"50%"},attrs:{src:e.$config.baseUrl+e.user.avatar,fit:"contain"}}),n("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.username))])]},proxy:!0}],null,!1,4224068020)},[n("el-menu-item",{attrs:{index:/user/+e.username}},[e._v("个人")]),n("el-menu-item",{on:{click:e.logout}},[e._v("退出")])],1)]:[n("div",{staticStyle:{display:"flex","justify-content":"flex-end","align-items":"center",height:"45px"}},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.loginDialogVisible=!0}}},[e._v("登录")]),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"small"},on:{click:function(t){e.registerDialogVisible=!0}}},[e._v("注册 ")])],1)]],2)],1),n("el-dialog",{attrs:{visible:e.loginDialogVisible,title:"登录",width:"25%","before-close":e.handleLoginClose},on:{"update:visible":function(t){e.loginDialogVisible=t}}},[n("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-position":"right","label-width":"80px",rules:e.loginRules}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password","show-password":""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.loginSubmit}},[e._v("登录")]),n("el-button",{on:{click:e.closeLoginForm}},[e._v("取消")])],1)],1)],1),n("el-dialog",{attrs:{visible:e.registerDialogVisible,title:"注册",width:"25%","before-close":e.handleRegisterClose},on:{"update:visible":function(t){e.registerDialogVisible=t}}},[n("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-position":"right","label-width":"80px",rules:e.registerRules}},[n("el-form-item",{attrs:{label:"用户名",prop:"username"}},[n("el-input",{model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password","show-password":""},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),n("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[n("el-input",{attrs:{type:"password","show-password":""},model:{value:e.registerForm.confirmPassword,callback:function(t){e.$set(e.registerForm,"confirmPassword",t)},expression:"registerForm.confirmPassword"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.registerSubmit}},[e._v("注册")]),n("el-button",{on:{click:e.closeRegisterForm}},[e._v("取消")])],1)],1)],1),n("div",{staticClass:"hidden-sm-and-up",staticStyle:{height:"45px",width:"100%",padding:"0 20px",display:"flex","justify-content":"space-between","align-items":"center","border-bottom":"solid 1px #e6e6e6"}},[n("div",{on:{click:function(t){e.menuDrawer=!e.menuDrawer}}},[n("Icon",{attrs:{type:"md-menu",size:"18"}})],1),n("el-image",{staticStyle:{height:"20px",flex:"1 1 auto"},attrs:{src:"/static/TTOJ.svg",fit:"contain"}}),n("div",[n("Icon",{attrs:{type:"ios-notifications",size:"18"}})],1)],1),n("el-drawer",{attrs:{visible:e.menuDrawer,direction:"ltr",size:"70%",withHeader:!1},on:{"update:visible":function(t){e.menuDrawer=t}}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.$route.path,mode:"vertical",router:"",ellipsis:"false"},on:{select:e.handleSelect}},[n("el-menu-item",{attrs:{index:"/home"}},[n("Icon",{attrs:{type:"md-home"}}),e._v(" 主页 ")],1),n("el-menu-item",{attrs:{index:"/problems"}},[n("Icon",{attrs:{type:"md-list"}}),e._v(" 题库 ")],1),n("el-menu-item",{attrs:{index:"/contest"}},[n("Icon",{attrs:{type:"md-medal"}}),e._v(" 比赛 ")],1),n("el-menu-item",{attrs:{index:"/forum"}},[n("Icon",{attrs:{type:"ios-chatboxes"}}),e._v(" 讨论 ")],1),e.showManageBtn?n("el-menu-item",{attrs:{index:"/manage"}},[e._v("管理")]):e._e(),e.auth?[n("el-submenu",{scopedSlots:e._u([{key:"title",fn:function(){return[n("el-image",{staticStyle:{width:"20px",height:"20px","border-radius":"50%"},attrs:{src:e.$config.baseUrl+e.user.avatar,fit:"contain"}}),n("span",{staticStyle:{"margin-left":"5px"}},[e._v(e._s(e.username))])]},proxy:!0}],null,!1,1047927700)},[n("el-menu-item",{on:{click:e.logout}},[e._v("退出")])],1)]:[n("div",[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.loginDialogVisible=!0}}},[e._v("登录")]),n("el-button",{staticStyle:{"margin-right":"20px"},attrs:{size:"small"},on:{click:function(t){e.registerDialogVisible=!0}}},[e._v("注册 ")])],1)]],2)],1)],1)},a=[],s=n("5530"),l=(n("e9c4"),n("6e87")),c=n("5d2d"),u=n("5880"),p=n("b775");function d(e){return p["a"].post("/api/oj/sso/login",e)}function m(e){return p["a"].post("/api/oj/sso/register",e)}function f(){return p["a"].post("/api/oj/sso/logout")}var h=n("2b5f"),g=n("fb22"),b=n("a18c"),v={name:"Header",data:function(){return{menuDrawer:!1,loginDialogVisible:!1,registerDialogVisible:!1,loginForm:{},registerForm:{},loginRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:3,max:12,message:"长度为3到12个字符"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:3,max:18,message:"长度为3到18个字符"}]},registerRules:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{min:3,max:12,message:"长度为3到12个字符"}],password:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:3,max:18,message:"长度为3到18个字符"}],confirmPassword:[{required:!0,message:"密码不能为空",trigger:"blur"},{min:3,max:18,message:"长度为3到18个字符"}]}}},computed:Object(s["a"])({},Object(u["mapGetters"])(["userId","username","auth","user","showManageBtn"])),created:function(){console.log(this.showManageBtn),console.log(this.user.avatar)},mounted:function(){},watch:{},methods:{goToProfile:function(){this.$router.push("/user/"+this.username)},loginSubmit:function(){var e=this;this.$refs["loginForm"].validate((function(t){t?d(e.loginForm).then((function(t){if(console.log(t),t.success){e.loginDialogVisible=!1,e.successNotify(t.message);var n=t.data.token,o=t.data.loginUser;if(o){c["a"].set("token",n),e.$store.commit(l["a"].Set_LoginUser,o);var i=Object(h["a"])(o.manageRouters,g["a"]);for(var r in i)b["a"].addRoute("dynamicRoutesParent",i[r])}}else e.errorNotify(t.message)})).catch((function(t){console.log(t),t=JSON.stringify(t),e.errorNotify(t)})):e.warnNotify("登录参数不合法,请重试")}))},registerSubmit:function(){var e=this;this.$refs["registerForm"].validate((function(t){t?m(e.registerForm).then((function(t){console.log(t),t.success?e.registerDialogVisible=!1:e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)})):e.warnNotify("注册参数不合法,请重试")}))},closeLoginForm:function(){this.loginDialogVisible=!1,this.loginForm={}},closeRegisterForm:function(){this.registerDialogVisible=!1,this.registerForm={}},handleLoginClose:function(){this.loginDialogVisible=!1},handleRegisterClose:function(){this.registerDialogVisible=!1},handleSelect:function(){this.menuDrawer=!1},logout:function(){var e=this;f().then((function(t){console.log(t),t.success?(c["a"].remove("token"),e.$store.commit(l["a"].Clear_LoginUser),e.$router.push("/"),e.successNotify(t.message)):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)}))}}},y=v,x=n("2877"),w=Object(x["a"])(y,r,a,!1,null,"0a6469e0",null),S=w.exports,C=n("4c03"),k={name:"Layout",components:{Header:S,Footer:C["a"]},created:function(){console.log(this.$route)}},_=k,I=Object(x["a"])(_,o,i,!1,null,null,null),N=I.exports;t["a"]=[{path:"/",redirect:"problems",component:N,children:[{path:"problems",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"9326"))}}]},{path:"/problems/:problemId",redirect:"",component:N,meta:{fullScreen:!0},children:[{path:"",redirect:"",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"e84a"))},children:[{path:"",name:"ProblemDescription",meta:{fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"b48d"))}},{path:"comments",name:"ProblemComments",meta:{fullScreen:!0},component:function(){return n.e("chunk-777fc688").then(n.bind(null,"445c"))}},{path:"solutions",name:"ProblemSolutions",meta:{fullScreen:!0},component:function(){return n.e("chunk-6e3a61db").then(n.bind(null,"3df1"))}},{path:"submitRecord",name:"ProblemSubmitRecord",meta:{requiredAuth:!0,fullScreen:!0},component:function(){return n.e("chunk-6e3a61db").then(n.bind(null,"3fe7"))}}]}]},{path:"/contest",redirect:"",component:N,children:[{path:"",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"8d4f"))}}]},{path:"/contest/:contestId",redirect:"",component:N,meta:{fullScreen:!0},children:[{path:"",redirect:"contestOverview",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"2bc7"))},children:[{path:"contestOverview",name:"contestOverview",meta:{title:"比赛说明",fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"98e4"))}},{path:"contestProblems",name:"contestProblems",meta:{title:"题目",fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"3b83"))}},{path:"contestRankings",name:"contestRankings",meta:{title:"排名",fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"fcb0"))}},{path:"contestSubmissions",name:"contestSubmissions",meta:{title:"所有提交",fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"8a76"))}},{path:"contestMy",name:"contestMy",meta:{fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"f8aa"))}},{path:"contestProblems/:problemDisplayId",name:"contestProblem",meta:{fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"e84a"))},redirect:"",children:[{path:"",name:"contestProblem",meta:{fullScreen:!0},component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"b48d"))}}]}]}]},{path:"/forum",component:N,redirect:"",children:[{path:"",component:function(){return n.e("chunk-777fc688").then(n.bind(null,"8310"))}}]},{path:"/home",redirect:"",meta:{needFooter:!0},component:N,children:[{path:"",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"1c62"))}}]},{path:"/user/:username",redirect:"",component:N,children:[{path:"",redirect:"",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"2cf5"))},children:[{path:"",name:"UserInfo",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"c03b"))}},{path:"submissions",name:"RecentSubmissions",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"94d8"))}},{path:"contests",name:"ContestRecords",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"c671"))}},{path:"solutions",name:"Solutions",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"fcdf"))}},{path:"notes",name:"Notes",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"94c2"))}},{path:"settings",name:"Settings",component:function(){return n.e("chunk-5a09baf6").then(n.bind(null,"438f"))}}]}]},{path:"/manage",redirect:"",component:N,meta:{requiredAuth:!0,fullScreen:!0},children:[{path:"",redirect:"",component:function(){return n.e("chunk-6e3a61db").then(n.bind(null,"5adf"))},name:"dynamicRoutesParent",children:[{path:"",meta:{name:"ManageDashboard",requiredAuth:!0,fullScreen:!0},component:function(){return n.e("chunk-777fc688").then(n.bind(null,"0060"))}}]}]},{path:"/test",redirect:"",component:N,children:[{path:"",component:function(){return n.e("chunk-777fc688").then(n.bind(null,"78c1"))}}]}]},f33e:function(e,t,n){},fb22:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[n("div",{staticStyle:{margin:"10px 20px"}},[n("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入作者名字",clearable:"",size:"small"},model:{value:e.condition.authorName,callback:function(t){e.$set(e.condition,"authorName",t)},expression:"condition.authorName"}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入题目名字",clearable:"",size:"small"},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name",t)},expression:"condition.name"}}),n("el-button",{attrs:{icon:"el-icon-search",size:"small"},on:{click:e.getProblemsByCondition}},[e._v("搜索 ")])],1),n("div",{staticStyle:{position:"relative",flex:"1 1 auto",overflow:"auto"}},[e.showSpin?n("Spin",{attrs:{fix:"",size:"large"}}):e._e(),n("el-table",{attrs:{data:e.problems}},[n("el-table-column",{attrs:{fixed:"",prop:"displayId",label:"显示ID",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"名字",align:"center"}}),n("el-table-column",{attrs:{prop:"authorName",label:"作者",align:"center"}}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center","min-width":"90px"}}),n("el-table-column",{attrs:{prop:"visible",label:"是否可见",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.changeProblemVisibility(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"info",plain:""},on:{click:function(n){return e.editProblem(t.row)}}}),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载题目测试文件",placement:"top-start"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"primary",plain:"",disabled:""},on:{click:function(n){return e.downloadTestCase(t.row)}}})],1),n("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(n){return e.deleteProblem(t.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger",plain:""},slot:"reference"})],1)]}}])})],1)],1),n("div",{staticClass:"block",staticStyle:{margin:"10px 10px 10px 20px"}},[n("el-pagination",{attrs:{currentPage:e.condition.currentPage,"page-sizes":[3,5],"page-size":e.condition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.condition.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},i=[],r=(n("e9c4"),n("99af"),n("b775"));function a(e){return r["a"].post("/api/oj/manage/problem/getProblemsByCondition",e)}function s(e){return r["a"].get("/api/oj/manage/problem/"+e)}function l(e,t){return r["a"].post("/api/oj/manage/problem/save",e,t)}function c(e,t){return r["a"].post("/api/oj/manage/problem/update",e,t)}function u(e,t){return r["a"].post("/api/oj/manage/problem/updateProblemVisibility/".concat(e,"/").concat(t))}function p(e){return r["a"].post("/api/manage/delete/".concat(e))}var d={name:"ManageProblemList",data:function(){return{problems:[],condition:{currentPage:1,size:3,total:0,authorName:"",name:"",pageSize:3},showSpin:!0}},created:function(){this.getProblemsByCondition()},methods:{changeProblemVisibility:function(e){var t=this,n=e.id,o=e.visible;u(n,o).then((function(e){console.log(e),e.success||t.errorNotify(e.message)})).catch((function(e){e=JSON.stringify(e),t.errorNotify(e)}))},getProblemsByCondition:function(){var e=this;this.showSpin=!0,a(this.condition).then((function(t){console.log(t),e.showSpin=!1,t.success?(e.problems=t.data.problems,e.condition.total=parseInt(t.data.total)):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.showSpin=!1,e.errorNotify(t)}))},handleSizeChange:function(e){this.condition.pageSize=e,this.getProblemsByCondition()},handleCurrentChange:function(e){this.condition.currentPage=e,this.getProblemsByCondition()},downloadTestCase:function(){},editProblem:function(e){this.$router.push("/manage/problems/".concat(e.id))},deleteProblem:function(e){var t=this;console.log(e),p(e.id).then((function(e){console.log(e),e.success?t.successNotify(e.message):t.errorNotify(e.message)})).catch((function(e){e=JSON.stringify(e),t.errorNotify(e)}))}}},m=d,f=(n("99ea"),n("2877")),h=Object(f["a"])(m,o,i,!1,null,"66cd0842",null),g=h.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",padding:"20px",position:"relative"}},[e.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),n("el-form",{ref:"problem",attrs:{model:e.problem,rules:e.problemRules,"label-width":"120px","label-position":"top",inline:""}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"题目ID",prop:"displayId"}},[n("el-input",{ref:"displayIdInput",model:{value:e.problem.displayId,callback:function(t){e.$set(e.problem,"displayId",t)},expression:"problem.displayId"}})],1)],1),n("el-col",{attrs:{span:16}},[n("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"题目名字",prop:"name"}},[n("el-input",{model:{value:e.problem.name,callback:function(t){e.$set(e.problem,"name",t)},expression:"problem.name"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目描述",prop:"description"}},[n("mavon-editor",{model:{value:e.problem.description,callback:function(t){e.$set(e.problem,"description",t)},expression:"problem.description"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"输入格式",prop:"input"}},[n("mavon-editor",{model:{value:e.problem.input,callback:function(t){e.$set(e.problem,"input",t)},expression:"problem.input"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"输出格式",prop:"output"}},[n("mavon-editor",{model:{value:e.problem.output,callback:function(t){e.$set(e.problem,"output",t)},expression:"problem.output"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目提示",prop:"hint"}},[n("mavon-editor",{model:{value:e.problem.hint,callback:function(t){e.$set(e.problem,"hint",t)},expression:"problem.hint"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"题目样例",prop:"sampleCase"}},[n("el-collapse",{model:{value:e.activeTestCases,callback:function(t){e.activeTestCases=t},expression:"activeTestCases"}},e._l(e.problem.sampleCase,(function(t,o){return n("el-collapse-item",{key:o,attrs:{name:o+""}},[n("template",{slot:"title"},[n("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%",padding:"0 5px"}},[n("span",[e._v("样例"+e._s(o+1))]),n("div",[n("el-button",{attrs:{type:"warning",plain:"",size:"mini"},on:{click:function(t){return e.deleteTestCase(o)}}},[e._v("删除 ")])],1)])]),n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("el-input",{staticStyle:{width:"48%"},attrs:{rows:4,type:"textarea",placeholder:"",maxlength:"1000","show-word-limit":""},model:{value:t.input,callback:function(n){e.$set(t,"input",n)},expression:"item.input"}}),n("el-input",{staticStyle:{width:"48%"},attrs:{rows:4,type:"textarea",placeholder:"",maxlength:"1000","show-word-limit":""},model:{value:t.output,callback:function(n){e.$set(t,"output",n)},expression:"item.output"}})],1)],2)})),1),n("el-button",{staticStyle:{width:"100%"},attrs:{type:"info",plain:""},on:{click:e.addTestCase}},[e._v("增加样例 ")])],1),n("div",{staticClass:"demo-block-control"},[e._v(" i ")])],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"时间限制(ms)",prop:"timeLimit"}},[n("el-input-number",{attrs:{step:500},model:{value:e.problem.timeLimit,callback:function(t){e.$set(e.problem,"timeLimit",t)},expression:"problem.timeLimit"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"内存限制(MB)",prop:"memoryLimit"}},[n("el-input-number",{attrs:{min:1,max:528,step:16},model:{value:e.problem.memoryLimit,callback:function(t){e.$set(e.problem,"memoryLimit",t)},expression:"problem.memoryLimit"}})],1)],1),n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"题目难度",prop:"level"}},[n("el-select",{attrs:{placeholder:"请选择","default-first-option":!0},model:{value:e.problem.level,callback:function(t){e.$set(e.problem,"level",t)},expression:"problem.level"}},e._l(e.levelOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-col",{attrs:{span:4,offset:2}},[n("el-form-item",{attrs:{label:"是否可见",prop:"visible"}},[n("el-switch",{model:{value:e.problem.visible,callback:function(t){e.$set(e.problem,"visible",t)},expression:"problem.visible"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"测试用例",prop:"testCaseFileProp"}},[n("el-upload",{ref:"uploadTestCaseFile",staticClass:"upload-demo",attrs:{action:"do not need","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList,method:"post","auto-upload":!1,"on-change":e.uploadChange},scopedSlots:e._u([{key:"tip",fn:function(){return[n("div",{staticClass:"el-upload__tip"},[e._v(" 请上传大小不超过100MB的 zip/rar 压缩文件 ")])]},proxy:!0}])},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"可选语言",prop:"languages"}},[n("el-checkbox-group",{model:{value:e.problem.languages,callback:function(t){e.$set(e.problem,"languages",t)},expression:"problem.languages"}},e._l(e.$config.supportLanguages,(function(e,t){return n("el-checkbox",{key:t,attrs:{label:e.value,name:"languages"}})})),1)],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"题目标签",prop:"tags"}},[e._l(e.problemTags,(function(t){return n("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])})),e.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)},blur:e.handleInputConfirm},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag ")])],2)],1)],1),n("el-row",{staticStyle:{display:"flex","align-items":"center"},attrs:{gutter:10}},[n("el-col",{attrs:{span:6}},[n("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"作者",prop:"authorName"}},[n("el-input",{model:{value:e.problem.authorName,callback:function(t){e.$set(e.problem,"authorName",t)},expression:"problem.authorName"}})],1)],1),n("el-col",{attrs:{span:14}},[n("el-form-item",{staticStyle:{width:"90%"},attrs:{label:"题目来源",prop:"source"}},[n("el-input",{model:{value:e.problem.source,callback:function(t){e.$set(e.problem,"source",t)},expression:"problem.source"}})],1)],1)],1),n("el-row",[n("el-col",[n("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.save}},[e._v("保存题目")])],1)],1)],1)],1)},v=[],y=n("5530"),x=(n("d9e2"),n("d81d"),n("d3b7"),n("25f0"),n("a434"),n("5880")),w={name:"ManageProblemEditor",components:{},data:function(){var e=this,t=function(e,t,n){if(""===t)n(new Error("请输入时间限制"));else{var o=parseInt(t);o>=1&&o<=1e4?n():n(new Error("时间限制的范围是1-10000"))}},n=function(e,t,n){if(""===t)n(new Error("请输入空间限制"));else{var o=parseInt(t);o>=1&&o<=1024?n():n(new Error("空间限制的范围是1-1024"))}},o=function(t,n,o){-1==e.problemId&&0==e.$refs.uploadTestCaseFile.uploadFiles.length?o(new Error("请上传测试文件")):o()};return{spinShow:!1,problemId:-1,problem:{displayId:"",name:"",description:"",input:"",output:"",hint:"",timeLimit:1e3,memoryLimit:256,visible:!0,languages:this.$config.supportLanguages.map((function(e){return e.value})),authorName:this.username,authorId:this.userId,source:"TTOJ problem",sampleCase:[]},levelOptions:[{value:"一眼",label:"一眼"},{value:"简单",label:"简单"},{value:"中等",label:"中等"},{value:"困难",label:"困难"},{value:"地狱",label:"地狱"}],problemTags:[],inputVisible:!1,inputValue:"",activeTestCases:[],file:null,fileList:[],problemRules:{displayId:[{required:!0,message:"请填写题目ID",trigger:"blur"},{min:4,max:10,message:"长度为4-10"}],name:[{required:!0,message:"请填写题目名称",trigger:"blur"},{min:1,max:30,message:"长度为1-30"}],description:[{required:!0,message:"请填写题面描述",trigger:"blur"}],input:[{required:!0,message:"请填写输入描述",trigger:"blur"}],output:[{required:!0,message:"请填写输出描述",trigger:"blur"}],timeLimit:[{validator:t,trigger:"blur"}],memoryLimit:[{validator:n,trigger:"blur"}],visible:[{required:!0,message:"请填写题目是否可见",trigger:"blur"}],languages:[{type:"array",required:!0,message:"请至少选择一个可以提交的语言",trigger:"blur"}],authorName:[{required:!0,message:"请填写题目作者",trigger:"blur"},{min:1,max:50,message:"长度为1-50"}],source:[{required:!0,message:"请填写题目来源",trigger:"blur"},{min:1,max:100,message:"长度为1-100"}],testCaseFileProp:[{validator:o,trigger:"blur"}],level:[{required:!0,message:"请选择题目难度",trigger:"blur"}],sampleCase:[{type:"array",required:!0,message:"请至少添加一个样例",trigger:"blur"}]}}},computed:Object(y["a"])({},Object(x["mapGetters"])(["userId","username","auth","user","showManageBtn"])),mounted:function(){this.$refs.displayIdInput.focus()},created:function(){var e=this,t=this.$route.params.problemId;t&&(this.problemId=t,this.spinShow=!0,s(t).then((function(t){if(e.showSpin=!1,t.success){var n=t.data.problem;n.sampleCase=JSON.parse(n.sampleCase),n.languages=JSON.parse(n.languages),console.log(n),e.problem=n;for(var o=0;o<e.problem.sampleCase.length;o++)e.activeTestCases.push(o.toString())}else e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.showSpin=!1,e.errorNotify(t)})))},methods:{deleteTestCase:function(e){console.log(this.problem.sampleCase,e),this.problem.sampleCase.splice(e,1)},addTestCase:function(){this.problem.sampleCase.push({input:"",output:""}),this.activeTestCases.push(this.activeTestCases.length.toString())},uploadChange:function(e,t){this.file=t[0].raw},save:function(){var e=this;this.$refs["problem"].validate((function(t){if(t){var n=JSON.parse(JSON.stringify(e.problem));n.sampleCase=JSON.stringify(n.sampleCase),n.languages=JSON.stringify(n.languages);var o=new FormData;console.log(n),n=JSON.stringify(n),o.append("adminProblemSaveParams",n),e.file?o.append("testcase",e.file):o.append("testcase",null),console.log(o.get("adminProblemSaveParams")),console.log(o.get("testcase")),console.log(e.problem);var i={headers:{"Content-Type":"multipart/form-data"}};console.log(e.problem),console.log(e.problemId),e.problemId&&-1!==e.problemId?c(o,i).then((function(t){console.log(t),t.success?e.successNotify(t.message):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)})):l(o,i).then((function(t){console.log(t),t.success?e.successNotify(t.message):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)})),console.log(e.problem)}else e.warnNotify("参数不合法,请重试")}))},deleteRow:function(e,t){t.splice(e,1)},handleClose:function(e){this.problemTags.splice(this.problemTags.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.problemTags.push(e),this.inputVisible=!1,this.inputValue=""},handlePreview:function(){},handleExceed:function(){},beforeRemove:function(){},handleRemove:function(){}}},S=w,C=(n("ae4e"),Object(f["a"])(S,b,v,!1,null,"3428d2f1",null)),k=C.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{}},[n("div",{staticStyle:{margin:"10px 20px"}},[n("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入比赛名字",clearable:"",size:"small"},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name",t)},expression:"condition.name"}}),n("el-button",{attrs:{icon:"el-icon-search",size:"small"},on:{click:e.getContestsByCondition}},[e._v("搜索 ")])],1),n("div",{staticStyle:{position:"relative",flex:"1 1 auto",overflow:"auto"}},[e.showSpin?n("Spin",{attrs:{fix:"",size:"large"}}):e._e(),n("el-table",{attrs:{data:e.contests}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticStyle:{padding:"0 20px 20px 20px"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$config.hint.contestAuthor))]),n("span",{staticClass:"itemTitle"},[e._v("比赛出题人:")])]),n("br"),e._l(t.row.contestAuthors,(function(o){return n("el-tag",{key:o.userId,staticStyle:{"margin-top":"10px"},attrs:{closable:o.username!==t.row.creatorName,"disable-transitions":!1,effect:"plain"},on:{close:function(n){return e.handleClose(t.row,o)}}},[e._v(" "+e._s(o.username)+" ")])})),e.contestAuthorInputVisible?n("el-autocomplete",{ref:"saveTagInput",staticClass:"input-new-tag",staticStyle:{width:"20%"},attrs:{size:"small","fetch-suggestions":function(n,o){return e.querySearchAsync(n,o,t.row)},placeholder:"请输入内容"},on:{select:function(n){return e.handleSelect(n,t.row)}},model:{value:e.contestAuthorInputValue,callback:function(t){e.contestAuthorInputValue=t},expression:"contestAuthorInputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ 增加出题人")]),n("el-button",{attrs:{plain:"",size:"small"},on:{click:function(n){return e.saveContestAuthors(t.row)}}},[e._v("保存")])],2)]}}])}),n("el-table-column",{attrs:{prop:"name",label:"名字",align:"center"}}),n("el-table-column",{attrs:{prop:"creatorName",label:"创建者",align:"center"}}),n("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[-1===t.row.status?n("span",[e._v("未开始")]):0===t.row.status?n("span",[e._v("进行中")]):n("span",[e._v("已结束")])]}}])}),n("el-table-column",{attrs:{prop:"ruleType",label:"比赛规则",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.ruleType?n("span",[e._v("ACM")]):2===t.row.ruleType?n("span",[e._v("OI")]):3===t.row.ruleType?n("span",[e._v("IOI")]):n("span",[e._v("未知")])]}}])}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),n("el-table-column",{attrs:{prop:"visible",label:"是否可见",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.changeContestVisibility(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",plain:""},on:{click:function(n){return e.editContest(t.row)}}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-button",{attrs:{size:"mini",plain:""},on:{click:function(n){return e.listContestProblems(t.row)}}},[n("Icon",{attrs:{type:"md-list"}})],1),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(n){return e.deleteContest(t.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger",plain:""},slot:"reference"})],1)]}}])})],1)],1),n("div",{staticClass:"block",staticStyle:{margin:"10px 10px 10px 20px"}},[n("el-pagination",{attrs:{currentPage:e.condition.currentPage,"page-sizes":[10,20],"page-size":e.condition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.condition.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},I=[];n("4de4"),n("159b"),n("7db0");function N(e){return r["a"].get("/api/oj/manage/contest/".concat(e))}function P(e){return r["a"].post("/api/oj/manage/contest/getContestsByCondition",e)}function O(e,t){return r["a"].post("/api/oj/manage/contest/changeContestVisibility/".concat(e,"/").concat(t))}function $(e){return r["a"].post("/api/oj/manage/contest/save",e)}function j(e){return r["a"].post("/api/oj/manage/contest/update",e)}function T(e){return r["a"].post("/api/oj/manage/contest/delete",e)}function z(e){return r["a"].post("/api/oj/manage/contest/getContestAuthorUsersBySearch",e)}function E(e){return console.log(e),r["a"].post("/api/oj/manage/contest/updateContestAuthors",e)}var L={name:"ManageContestList",data:function(){return{dynamicTags:["标签一","标签二","标签三"],inputVisible:!1,inputValue:"",contestAuthorInputVisible:!1,contestAuthorInputValue:"",contests:[],condition:{currentPage:1,total:0,name:"",pageSize:10},showSpin:!0,contestAuthorCandidate:[{value:"请输入昵称进行搜索"}],state:"",timeout:null}},created:function(){this.getContestsByCondition()},mounted:function(){},methods:{querySearchAsync:function(e,t,n){var o=this;console.log(n),e?z({username:e,contestId:n.id}).then((function(e){console.log(e),e.success?(o.contestAuthorCandidate=e.data.contestAuthors.filter((function(e){return-1===n.contestAuthors.indexOf(e.username)})),o.contestAuthorCandidate.forEach((function(e){return e.value=e.username})),t(o.contestAuthorCandidate)):o.errorNotify(e.message)})).catch((function(e){o.errorNotify(e)})):t(this.contestAuthorCandidate)},handleSelect:function(e,t){console.log(e),t.contestAuthors.find((function(t){return t.username===e.username}))||t.contestAuthors.push({username:e.username,userId:e.userId}),this.contestAuthorInputVisible=!1,this.contestAuthorInputValue=""},saveContestAuthors:function(e){var t=this;E({contestId:e.id,contestAuthors:e.contestAuthors.map((function(e){return{authorId:e.userId,username:e.username}}))}).then((function(e){console.log(e),e.success?t.successNotify(e.message):t.errorNotify(e.message)}))},listContestProblems:function(e){console.log(e),this.$router.push("/manage/contests/".concat(e.id,"/problems"))},changeContestVisibility:function(e){var t=this,n=e.id,o=e.visible;O(n,o).then((function(e){console.log(e),e.success||t.errorNotify(e.message)})).catch((function(e){e=JSON.stringify(e),t.errorNotify(e)}))},getContestsByCondition:function(){var e=this;console.log(11),this.showSpin=!0,P(this.condition).then((function(t){console.log(t),e.showSpin=!1,t.success?(e.contests=t.data.contests,e.condition.total=parseInt(t.data.total)):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.showSpin=!1,e.errorNotify(t)}))},handleSizeChange:function(e){this.condition.pageSize=e,this.getContestsByCondition()},handleCurrentChange:function(e){this.condition.currentPage=e,this.getContestsByCondition()},editContest:function(e){this.$router.push("/manage/contests/".concat(e.id))},deleteContest:function(e){var t=this;T(e.id).then((function(e){console.log(e),e.success?t.successNotify(e.message):t.errorNotify(e.message)})).catch((function(e){e=JSON.stringify(e),t.errorNotify(e)}))},handleClose:function(e,t){e.contestAuthors.splice(e.contestAuthors.indexOf(t),1)},showInput:function(){var e=this;this.contestAuthorInputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))}}},V=L,A=(n("c6a2"),Object(f["a"])(V,_,I,!1,null,"2d79136e",null)),F=A.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",padding:"0 10px 20px 20px",overflow:"auto",position:"relative"}},[e.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):e._e(),n("el-form",{ref:"contest",attrs:{model:e.contest,rules:e.contestRules,"label-width":"120px","label-position":"top",inline:""}},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"比赛名字",prop:"name"}},[n("el-input",{model:{value:e.contest.name,callback:function(t){e.$set(e.contest,"name",t)},expression:"contest.name"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:24}},[n("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"比赛描述",prop:"description"}},[n("mavon-editor",{model:{value:e.contest.description,callback:function(t){e.$set(e.contest,"description",t)},expression:"contest.description"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"开始时间",prop:"startTime"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择开始时间"},model:{value:e.contest.startTime,callback:function(t){e.$set(e.contest,"startTime",t)},expression:"contest.startTime"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"结束时间",prop:"endTime"}},[n("el-date-picker",{attrs:{type:"datetime",placeholder:"选择结束时间"},model:{value:e.contest.endTime,callback:function(t){e.$set(e.contest,"endTime",t)},expression:"contest.endTime"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"比赛密码",prop:"password"}},[n("el-input",{attrs:{placeholder:"比赛密码,不填写则无密码"},model:{value:e.contest.password,callback:function(t){e.$set(e.contest,"password",t)},expression:"contest.password"}})],1)],1)],1),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"比赛规则",prop:"ruleType"}},[n("el-radio-group",{model:{value:e.contest.ruleType,callback:function(t){e.$set(e.contest,"ruleType",t)},expression:"contest.ruleType"}},e._l(e.$config.supportRuleTypes,(function(t){return n("el-radio",{key:t.title,attrs:{label:t.value,disabled:1!==t.value}},[e._v(" "+e._s(t.title)+" ")])})),1)],1)],1),n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"是否可见",prop:"visible"}},[n("el-switch",{model:{value:e.contest.visible,callback:function(t){e.$set(e.contest,"visible",t)},expression:"contest.visible"}})],1)],1),1===e.contest.ruleType?n("el-col",{attrs:{span:4}},[n("el-form-item",{attrs:{label:"罚时(minutes)",prop:"penalty"}},[n("el-input",{model:{value:e.contest.penalty,callback:function(t){e.$set(e.contest,"penalty",t)},expression:"contest.penalty"}})],1)],1):e._e()],1),n("el-divider"),n("el-row",{attrs:{gutter:10}},[n("el-col",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存比赛")])],1)],1)],1)],1)},B=[],M={name:"ManageContestEditor",components:{},data:function(){var e=this,t=function(e,t,n){if(""===t||null===t)n(new Error("请填写提交错误的罚时"));else{var o=parseInt(t);o>=0&&o<=100?n():n(new Error("罚时的范围是0-100"))}},n=function(t,n,o){if(""===n||null===n)o(new Error("请填写比赛结束时间"));else{var i=e.$dayjs(n),r=e.$dayjs(e.contest.startTime);i.isBefore(r)?o(new Error("开始时间晚于结束时间")):o()}};return{spinShow:!1,contest:{name:"",description:"",visible:!1,creatorName:this.username,creatorId:this.userId,penalty:20,ruleType:1,password:""},contestRules:{name:[{required:!0,message:"请填写比赛名称",trigger:"blur"},{min:1,max:100,message:"长度为1-100"}],description:[{required:!0,message:"请填写题面描述",trigger:"blur"}],startTime:[{required:!0,message:"请填写开始时间",trigger:"blur"}],endTime:[{validator:n,trigger:"blur"}],visible:[{required:!0,message:"请填写题目是否可见",trigger:"blur"}],penalty:[{validator:t,trigger:"blur"}],ruleType:[{required:!0,message:"请选择比赛规则",trigger:"blur"}]},contestId:-1}},computed:Object(y["a"])({},Object(x["mapGetters"])(["user","userId","username","auth"])),created:function(){var e=this,t=this.$route.params.contestId;t&&(console.log(t),this.contestId=t,this.spinShow=!0,N(t).then((function(t){e.spinShow=!1,console.log(t);var n=t.data.contest;e.contest=n})).catch((function(t){t=JSON.stringify(t),e.spinShow=!1,e.errorNotify(t)})))},methods:{handleSave:function(){var e=this;this.$refs["contest"].validate((function(t){if(t){var n=e.contest;n.startTime=e.$dayjs(n.startTime).format("YYYY-MM-DD HH:mm:ss"),n.endTime=e.$dayjs(n.endTime).format("YYYY-MM-DD HH:mm:ss"),console.log(n),-1!==e.contestId?j(n).then((function(t){t.success?e.successNotify(t.message):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)})):$(n).then((function(t){t.success?e.successNotify(t.message):e.errorNotify(t.message)})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)}))}else e.warnNotify("参数不合法,请重试")}))}}},R=M,U=(n("ffd0"),Object(f["a"])(R,D,B,!1,null,"34bee3de",null)),J=U.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("tag editor")])},W=[],G={name:"ManageProblemTagEditor"},H=G,Y=Object(f["a"])(H,q,W,!1,null,"55fe4494",null),K=Y.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" 正在建设中... ")])},X=[],Z={name:"ManageProblemBat"},ee=Z,te=Object(f["a"])(ee,Q,X,!1,null,"0ce7043a",null),ne=te.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"100%",display:"flex","flex-direction":"column"}},[n("div",{staticStyle:{margin:"10px 20px"}},[n("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入用户名称",clearable:"",size:"small"},model:{value:e.condition.username,callback:function(t){e.$set(e.condition,"username",t)},expression:"condition.username"}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-button",{attrs:{icon:"el-icon-search",size:"small"},on:{click:e.getUserByCondition}},[e._v("搜索 ")])],1),n("div",{staticStyle:{position:"relative",flex:"1 1 auto",overflow:"auto"}},[e.showSpin?n("Spin",{attrs:{fix:"",size:"large"}}):e._e(),n("el-table",{attrs:{data:e.users}},[n("el-table-column",{attrs:{fixed:"",prop:"username",label:"用户名",align:"center"}}),n("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center",width:"60px"}}),n("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center","min-width":"60px"}}),n("el-table-column",{attrs:{prop:"lastLogin",label:"最近登录",align:"center","min-width":"60px"}}),n("el-table-column",{attrs:{label:"特殊身份",align:"center","min-width":"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.roles)+" ")]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"info",plain:""},on:{click:function(n){return e.editUser(t.row)}}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(n){return e.deleteUser(t.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger",plain:""},slot:"reference"})],1)]}}])})],1)],1),n("div",{staticClass:"block",staticStyle:{margin:"10px 10px 10px 20px"}},[n("el-pagination",{attrs:{currentPage:e.condition.currentPage,"page-sizes":[3,5],"page-size":e.condition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.condition.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"修改用户信息",visible:e.userDialogVisible,"label-position":"right",width:"40%"},on:{"update:visible":function(t){e.userDialogVisible=t}}},[n("el-form",{ref:"userForm",attrs:{model:e.userForm,"label-width":"80px",rules:e.userRules}},[n("el-form-item",{attrs:{label:"角色",prop:"roles"}},[n("el-checkbox-group",{model:{value:e.userForm.roles,callback:function(t){e.$set(e.userForm,"roles",t)},expression:"userForm.roles"}},e._l(e.$config.roles,(function(t){return n("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.userDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v("确 定")])],1)],1)],1)},ie=[];function re(e){return r["a"].post("/api/oj/manage/user/list",e)}function ae(e,t){return r["a"].post("/api/oj/manage/user/updateRoles/".concat(e),t)}var se={name:"ManageUserList",data:function(){return{users:[],selectedUserId:0,condition:{currentPage:1,size:3,total:0,username:"",pageSize:3},showSpin:!1,userDialogVisible:!1,userForm:{roles:[]},userRules:{roles:[{type:"array",required:!0,message:"请至少选择一个角色",trigger:"blur"}]}}},created:function(){this.getUserByCondition()},methods:{saveUser:function(){var e=this;this.$refs["userForm"].validate((function(t){t&&(console.log(e.userForm.roles),ae(e.selectedUserId,e.userForm.roles).then((function(t){console.log(t),t.success?e.successNotify(t.message):e.errorNotify(t.message),e.userDialogVisible=!1})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)})))}))},editUser:function(e){this.selectedUserId=e.id,this.userForm.roles=e.roles,this.userDialogVisible=!0},deleteUser:function(e){},getUserByCondition:function(){var e=this;this.showSpin=!0,re(this.condition).then((function(t){console.log(t),t.success?(e.condition.total=parseInt(t.data.total),e.users=t.data.users):e.errorNotify(t.message),e.showSpin=!1})).catch((function(t){t=JSON.stringify(t),e.errorNotify(t)}))},handleSizeChange:function(e){this.condition.pageSize=e,this.getUserByCondition()},handleCurrentChange:function(e){this.condition.currentPage=e,this.getUserByCondition()}}},le=se,ce=Object(f["a"])(le,oe,ie,!1,null,"494fb6f6",null),ue=ce.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[n("div",{staticStyle:{margin:"10px 20px"}},[n("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入作者名字",clearable:"",size:"small"},model:{value:e.condition.authorName,callback:function(t){e.$set(e.condition,"authorName",t)},expression:"condition.authorName"}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-input",{staticStyle:{width:"30%"},attrs:{placeholder:"输入题目名字",clearable:"",size:"small"},model:{value:e.condition.problemName,callback:function(t){e.$set(e.condition,"problemName",t)},expression:"condition.problemName"}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-button",{attrs:{icon:"el-icon-search",size:"small"},on:{click:e.getContestProblemsByCondition}},[e._v("搜索 ")])],1),n("div",{staticStyle:{position:"relative",flex:"1 1 auto",overflow:"auto"}},[e.showSpin?n("Spin",{attrs:{fix:"",size:"large"}}):e._e(),n("el-table",{attrs:{data:e.problems}},[n("el-table-column",{attrs:{fixed:"",prop:"problemDisplayId",label:"显示ID",align:"center"}}),n("el-table-column",{attrs:{prop:"problemName",label:"名字",align:"center"}}),n("el-table-column",{attrs:{prop:"authorName",label:"作者",align:"center"}}),n("el-table-column",{attrs:{prop:"visible",label:"比赛中是否可见",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.updateContestProblemVisibility(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"info",plain:""},on:{click:function(n){return e.editContestProblemDisplayId(t.row)}}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下载题目测试文件",placement:"top-start"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-download",type:"primary",plain:""},on:{click:function(n){return e.downloadTestCase(t.row)}}})],1),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-popconfirm",{attrs:{title:"确定删除吗？"},on:{confirm:function(n){return e.deleteProblem(t.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger",plain:""},slot:"reference"})],1)]}}])})],1)],1),n("div",{staticStyle:{display:"flex","justify-content":"space-between","align-items":"center",padding:"10px"}},[n("el-button",{attrs:{plain:"",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:e.openArchiveProblems}},[e._v("添加题目")]),n("div",{staticClass:"block",staticStyle:{margin:"10px 10px 10px 20px"}},[n("el-pagination",{attrs:{currentPage:e.condition.currentPage,"page-sizes":[3,5],"page-size":e.condition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.condition.total,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),n("el-dialog",{attrs:{title:"请从题库中选择题目",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:"请输入题目名字",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchProblemsByCondition.apply(null,arguments)}},model:{value:e.searchCondition.problemName,callback:function(t){e.$set(e.searchCondition,"problemName",t)},expression:"searchCondition.problemName"}}),n("el-divider",{staticStyle:{height:"100%"},attrs:{direction:"vertical"}}),n("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:"请输入作者昵称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchProblemsByCondition.apply(null,arguments)}},model:{value:e.searchCondition.authorName,callback:function(t){e.$set(e.searchCondition,"authorName",t)},expression:"searchCondition.authorName"}}),n("div",{staticStyle:{position:"relative"}},[e.searchShowSpin?n("Spin",{attrs:{fix:"",size:"large"}}):e._e(),n("el-table",{attrs:{data:e.archiveProblems}},[n("el-table-column",{attrs:{fixed:"",prop:"displayId",label:"显示ID",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"名字",align:"center"}}),n("el-table-column",{attrs:{prop:"authorName",label:"作者",align:"center"}}),n("el-table-column",{attrs:{prop:"visible",label:"题库中是否可见",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{on:{change:function(n){return e.updateProblemVisibility(t.row)}},model:{value:t.row.visible,callback:function(n){e.$set(t.row,"visible",n)},expression:"scope.row.visible"}})]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",icon:"el-icon-folder-add",type:"info",plain:""},on:{click:function(n){return e.addContestProblem(t.row)}}})]}}])})],1),n("div",{staticClass:"block",staticStyle:{margin:"10px 10px 10px 20px"}},[n("el-pagination",{attrs:{currentPage:e.searchCondition.currentPage,"page-sizes":[10,20],"page-size":e.searchCondition.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.searchCondition.total,background:""},on:{"size-change":e.handleSearchSizeChange,"current-change":e.handleSearchCurrentChange}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"请输入题目在比赛中显示ID",visible:e.displayIdEditorVisible,width:"30%"},on:{"update:visible":function(t){e.displayIdEditorVisible=t}}},[n("el-input",{attrs:{placeholder:"请输入题目在比赛中显示ID"},model:{value:e.displayIdInput,callback:function(t){e.displayIdInput=t},expression:"displayIdInput"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.displayIdEditorVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.closeDisplayIdEditor}},[e._v("确 定")])],1)],1)],1)},de=[];n("b0c0");function me(e){return console.log(e),r["a"].post("/api/oj/manage/contestProblem/getContestProblemsByCondition",e)}function fe(e){return r["a"].post("/api/oj/manage/contestProblem/deleteContestProblem",e)}function he(e){return r["a"].post("/api/oj/manage/contestProblem/searchProblemsFromArchiveByCondition",e)}function ge(e){return r["a"].post("/api/oj/manage/contestProblem/addContestProblem",e)}function be(e){return r["a"].post("/api/oj/manage/contestProblem/updateContestProblem",e)}var ve={name:"ManageContestProblemList",data:function(){return{problems:[],condition:{currentPage:1,total:0,authorName:"",problemName:"",pageSize:3,contestId:this.$route.params.contestId},searchCondition:{currentPage:1,total:0,authorName:"",problemName:"",pageSize:3,contestId:this.$route.params.contestId},showSpin:!0,dialogVisible:!1,searchProblemName:"",archiveProblems:[],searchShowSpin:!1,displayIdEditorVisible:!1,displayIdInput:"",currentEditorProblemId:-1}},created:function(){this.getContestProblemsByCondition()},methods:{closeDisplayIdEditor:function(){var e=this;be({contestId:this.$route.params.contestId,problemId:this.currentEditorProblemId,problemDisplayId:this.displayIdInput}).then((function(t){console.log(t),e.displayIdEditorVisible=!1,t.success?(e.successNotify(t.message),e.getContestProblemsByCondition()):e.errorNotify(t.message)})).catch((function(t){e.errorNotify(t)}))},updateProblemVisibility:function(e){var t=this,n=e.id,o=e.visible;u(n,o).then((function(e){console.log(e),e.success?t.successNotify(e.message):t.errorNotify(e.message)})).catch((function(e){e=JSON.stringify(e),t.errorNotify(e)}))},searchProblemsByCondition:function(){var e=this;this.searchShowSpin=!0,he(this.searchCondition).then((function(t){e.searchShowSpin=!1,console.log(t),t.success?(e.archiveProblems=t.data.problems,e.searchCondition.total=parseInt(t.data.total)):e.errorNotify(t.message)})).catch((function(t){e.searchShowSpin=!1,e.errorNotify(t)}))},openArchiveProblems:function(){this.dialogVisible=!0,this.searchProblemsByCondition()},addContestProblem:function(e){var t=this;void 0!==this.problems.find((function(t){return t.problemId===e.id}))?this.warnNotify("比赛已经包含题目了"):void 0!==this.problems.find((function(t){return t.problemDisplayId===e.displayId}))?this.warnNotify("显示ID和比赛题目重复,请修改比赛中题目显示ID"):ge({contestId:this.$route.params.contestId,problemId:e.id,problemName:e.name,authorName:e.authorName,problemDisplayId:e.displayId}).then((function(e){console.log(e),e.success?(t.successNotify(e.message),t.getContestProblemsByCondition()):t.errorNotify(e.message)})).catch((function(e){t.errorNotify(e)}))},updateContestProblemVisibility:function(e){var t=this,n=e.problemId,o=e.visible,i=this.$route.params.contestId;be({contestId:i,problemId:n,visible:o}).then((function(e){console.log(e),e.success?t.successNotify(e.message):t.errorNotify(e.message)})).catch((function(e){console.log(e)}))},getContestProblemsByCondition:function(){var e=this;this.showSpin=!0,me(this.condition).then((function(t){e.showSpin=!1,console.log(t),t.success?(e.problems=t.data.contestProblems,e.condition.total=parseInt(t.data.total)):e.errorNotify(t.message)})).catch((function(t){e.showSpin=!1,e.errorNotify(t)}))},handleSearchSizeChange:function(e){this.searchCondition.pageSize=e,this.searchProblemsByCondition()},handleSearchCurrentChange:function(e){this.searchCondition.currentPage=e,this.searchProblemsByCondition()},handleSizeChange:function(e){this.condition.pageSize=e,this.getContestProblemsByCondition()},handleCurrentChange:function(e){this.condition.currentPage=e,this.getContestProblemsByCondition()},downloadTestCase:function(){},editContestProblemDisplayId:function(e){this.displayIdInput=e.problemDisplayId,this.currentEditorProblemId=e.problemId,this.displayIdEditorVisible=!0},deleteProblem:function(e){var t=this;fe({contestId:this.$route.params.contestId,problemId:e.problemId}).then((function(e){console.log(e),e.success?(t.successNotify(e.message),t.getContestProblemsByCondition()):t.errorNotify(e.message)})).catch((function(e){e=JSON.stringify(e),t.errorNotify(e)}))}}},ye=ve,xe=Object(f["a"])(ye,pe,de,!1,null,"17c6dcbc",null),we=xe.exports;t["a"]=[{path:"users",meta:{name:"ManageUser",requiredAuth:!0},component:ue},{path:"problems",meta:{name:"ManageProblem",requiredAuth:!0},component:g},{path:"problems/create",meta:{name:"ManageProblem",requiredAuth:!0,scrollTop:0},component:k},{path:"problems/bat",meta:{name:"ManageProblem",requiredAuth:!0},component:ne},{path:"problems/:problemId",meta:{name:"ManageProblem",requiredAuth:!0},component:k},{path:"contests",meta:{name:"ManageContest",requiredAuth:!0},component:F},{path:"contests/create",meta:{name:"ManageContest",requiredAuth:!0},component:J},{path:"contests/:contestId",meta:{name:"ManageContest",requiredAuth:!0},component:J},{path:"contests/:contestId/problems",meta:{name:"ManageContest",requiredAuth:!0},component:we},{path:"problemTags",meta:{name:"ManageProblemTag",requiredAuth:!0},component:K}]},ffd0:function(e,t,n){"use strict";n("8521")}});